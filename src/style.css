/* Pixel-ish UI shell for Phaser canvas + minimal HUD */

:root {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: #0c0f14;
  color: #e8f0ff;
}

html,
body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  /* 移动端优化 */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  touch-action: none; /* 防止默认触摸行为 */
}

body {
  /* 防止移动端缩放 */
  touch-action: pan-x pan-y;
}

#app {
  height: 100%;
}

#game-root {
  height: 100%;
}

canvas {
  display: block;
  margin: 0 auto;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  /* 移动端优化 */
  touch-action: none;
  -webkit-tap-highlight-color: transparent;
}

#hud {
  position: fixed;
  left: 12px;
  top: 12px;
  z-index: 10;
  pointer-events: none;
  font-size: 14px;
}

.hud-row {
  display: flex;
  gap: 8px;
  align-items: center;
}

.hud-row + .hud-row {
  margin-top: 8px;
}

.hud-pill {
  pointer-events: none;
  padding: 6px 10px;
  border: 1px solid rgba(232, 240, 255, 0.18);
  background: rgba(12, 15, 20, 0.6);
  backdrop-filter: blur(6px);
}

.hud-hint {
  opacity: 0.85;
}

/* 主武器信息（左上角常显示） */
/* 主武器信息现在在canvas中渲染，不再使用DOM元素 */

/* 怪物图鉴 */
#bestiary {
  position: fixed;
  right: 12px;
  top: 12px;
  z-index: 10;
  font-size: 12px;
  max-width: 280px; /* 加宽：从200px增加到280px */
  max-height: calc(100vh - 24px); /* 限制最大高度 */
  overflow-y: auto; /* 允许滚动 */
  overflow-x: hidden; /* 隐藏横向滚动条 */
  scrollbar-width: none; /* Firefox: 隐藏滚动条 */
  -ms-overflow-style: none; /* IE/Edge: 隐藏滚动条 */
}

/* Webkit浏览器（Chrome/Safari）: 隐藏滚动条但保持滚动功能 */
#bestiary::-webkit-scrollbar {
  display: none;
}

.bestiary-title {
  font-weight: bold;
  margin-bottom: 8px;
  padding: 6px 10px;
  border: 1px solid rgba(232, 240, 255, 0.18);
  background: rgba(12, 15, 20, 0.6);
  backdrop-filter: blur(6px);
  text-align: center;
  pointer-events: auto;
  user-select: none;
}

.bestiary-title:hover {
  background: rgba(12, 15, 20, 0.8);
}

.bestiary-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  pointer-events: none;
}

.bestiary-item {
  padding: 8px;
  border: 1px solid rgba(232, 240, 255, 0.18);
  background: rgba(12, 15, 20, 0.6);
  backdrop-filter: blur(6px);
  pointer-events: none;
}

.bestiary-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.bestiary-item-color {
  width: 12px;
  height: 12px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  flex-shrink: 0;
}

.bestiary-item-name {
  font-weight: bold;
  font-size: 13px;
}

.bestiary-item-stats {
  font-size: 11px;
  line-height: 1.4;
  color: rgba(232, 240, 255, 0.85);
}

.bestiary-item-stat {
  margin: 2px 0;
}

/* 技能状态栏（右上角，怪物图鉴正下方，默认折叠） */
#skills-bar {
  position: fixed;
  right: 12px;
  top: 55px; /* 怪物图鉴标题高度(约35px) + 间距(8px) + top(12px) = 55px */
  z-index: 10;
  font-size: 12px; /* 与怪物图鉴一致 */
  max-width: 280px; /* 与怪物图鉴一致 */
  max-height: calc(100vh - 24px);
  overflow-y: auto; /* 允许滚动 */
  overflow-x: hidden; /* 隐藏横向滚动条 */
  scrollbar-width: none; /* Firefox: 隐藏滚动条 */
  -ms-overflow-style: none; /* IE/Edge: 隐藏滚动条 */
}

/* Webkit浏览器（Chrome/Safari）: 隐藏滚动条但保持滚动功能 */
#skills-bar::-webkit-scrollbar {
  display: none;
}

/* 移动端技能栏调整 */
@media screen and (max-width: 768px) {
  #skills-bar {
    right: 4px;
    top: 20px; /* 移动端怪物图鉴更小，调整位置 */
    max-width: 200px; /* 与怪物图鉴宽度一致 */
    font-size: 10px; /* 与怪物图鉴一致 */
    max-height: calc(100vh - 8px); /* 与怪物图鉴一致 */
  }
  
  .skills-bar-title {
    padding: 4px 6px; /* 与怪物图鉴标题一致 */
    margin-bottom: 4px; /* 与怪物图鉴标题一致 */
    font-size: 10px; /* 与怪物图鉴标题一致 */
  }
  
  .skill-item {
    padding: 4px; /* 与怪物图鉴项一致 */
  }
  
  .skill-item-name {
    font-size: 11px; /* 与怪物图鉴项名称一致 */
  }
  
  .skill-item-level {
    font-size: 9px; /* 与怪物图鉴项统计一致 */
  }
  
  .skill-item-stats {
    font-size: 9px; /* 与怪物图鉴项统计一致 */
  }
}

.skills-bar-title {
  font-weight: bold;
  margin-bottom: 8px;
  padding: 6px 10px;
  border: 1px solid rgba(232, 240, 255, 0.18);
  background: rgba(12, 15, 20, 0.6);
  backdrop-filter: blur(6px);
  text-align: center;
  pointer-events: auto;
  user-select: none;
  cursor: pointer;
  font-size: 12px; /* 与怪物图鉴标题一致（通过继承#skills-bar的font-size） */
}

.skills-bar-title:hover {
  background: rgba(12, 15, 20, 0.8);
}

.skills-bar-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: none; /* 不限制高度，铺开显示 */
  overflow: visible; /* 不滚动 */
}

.skills-bar-list.collapsed {
  display: none; /* 折叠时隐藏 */
}

.skill-item {
  padding: 8px; /* 与怪物图鉴项一致 */
  border: 1px solid rgba(232, 240, 255, 0.18); /* 与怪物图鉴项一致 */
  background: rgba(12, 15, 20, 0.6); /* 与怪物图鉴项一致 */
  backdrop-filter: blur(6px); /* 与怪物图鉴项一致 */
  pointer-events: none;
}

.skill-item-name {
  font-weight: bold;
  font-size: 13px; /* 与怪物图鉴项名称一致 */
  color: #e8f0ff;
  margin-bottom: 6px; /* 与怪物图鉴项一致 */
}

.skill-item-level {
  font-size: 11px; /* 与怪物图鉴项统计一致 */
  color: rgba(232, 240, 255, 0.85); /* 与怪物图鉴项统计一致 */
  line-height: 1.4; /* 与怪物图鉴项统计一致 */
  margin: 2px 0; /* 与怪物图鉴项统计一致 */
}

.skill-item-stats {
  font-size: 11px; /* 与怪物图鉴项统计一致 */
  color: rgba(232, 240, 255, 0.85); /* 与怪物图鉴项统计一致 */
  margin-top: 4px;
  line-height: 1.4; /* 与怪物图鉴项统计一致 */
  word-break: break-all;
}

.skill-item-main {
  border-left: 3px solid #6bff95; /* 主技能：绿色边框 */
  margin-bottom: 2px;
}

.skill-item-upgrade {
  border-left: 2px solid #a9c1ff; /* 强化词条：蓝色边框 */
  margin-left: 12px;
  padding-left: 8px;
  margin-top: 2px;
  margin-bottom: 2px;
  font-size: 11px;
}

.skill-item-upgrade .skill-item-name {
  color: rgba(232, 240, 255, 0.85);
}

.skill-item-tag {
  font-size: 9px;
  color: rgba(169, 193, 255, 0.8);
  font-weight: normal;
}

/* 疯狂模式按钮 */
.crazy-mode-btn {
  position: fixed;
  right: 12px;
  bottom: 12px;
  z-index: 20;
  padding: 8px 16px;
  border: 2px solid #ff6b6b;
  background: rgba(255, 107, 107, 0.2);
  color: #ff6b6b;
  font-family: monospace;
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  user-select: none;
  transition: all 0.2s;
  backdrop-filter: blur(6px);
}

.crazy-mode-btn:hover {
  background: rgba(255, 107, 107, 0.4);
  border-color: #ff4444;
}

.crazy-mode-btn.active {
  background: rgba(255, 107, 107, 0.6);
  border-color: #ff0000;
  color: #ffffff;
  box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
}

/* 移动端按钮调整 */
@media screen and (max-width: 768px) {
  .crazy-mode-btn {
    right: 4px;
    bottom: 4px;
    padding: 6px 12px;
    font-size: 10px;
  }
}

/* 移动端适配 */
@media screen and (max-width: 768px) {
  /* HUD 调整：缩小字体和间距，移到顶部边缘 */
  #hud {
    left: 4px;
    top: 4px;
    font-size: 11px;
  }

  .hud-row {
    gap: 4px;
    flex-wrap: wrap;
  }

  .hud-row + .hud-row {
    margin-top: 4px;
  }

  .hud-pill {
    padding: 4px 6px;
    font-size: 10px;
  }

  .hud-hint {
    display: none; /* 移动端隐藏提示文字 */
  }


  /* 怪物图鉴：移到右上角，缩小尺寸，默认折叠 */
  #bestiary {
    right: 4px;
    top: 4px;
    max-width: 200px; /* 移动端也加宽：从140px增加到200px */
    font-size: 10px;
    max-height: calc(100vh - 8px);
  }

  .bestiary-title {
    padding: 4px 6px;
    margin-bottom: 4px;
    font-size: 10px;
  }

  .bestiary-item {
    padding: 4px;
  }

  .bestiary-item-name {
    font-size: 11px;
  }

  .bestiary-item-stats {
    font-size: 9px;
  }


  .skills-bar-title {
    font-size: 11px;
    margin-bottom: 4px;
  }

  .skill-item {
    padding: 4px;
  }

  .skill-item-name {
    font-size: 10px;
  }

  .skill-item-level {
    font-size: 9px;
  }
}

/* 小屏幕移动端（手机竖屏） */
@media screen and (max-width: 480px) {
  #hud {
    font-size: 10px;
  }

  .hud-pill {
    padding: 3px 5px;
    font-size: 9px;
  }

  /* 进一步缩小怪物图鉴和技能栏 */
  #bestiary {
    max-width: 160px; /* 小屏移动端也加宽：从120px增加到160px */
    font-size: 9px;
    max-height: calc(100vh - 8px);
  }

  .bestiary-title {
    padding: 3px 5px;
    font-size: 9px;
  }

  #skills-bar {
    max-width: 160px; /* 与怪物图鉴宽度一致 */
    font-size: 9px; /* 与怪物图鉴一致 */
    max-height: calc(100vh - 8px); /* 与怪物图鉴一致 */
  }
  
  .skills-bar-title {
    padding: 3px 5px; /* 与怪物图鉴标题一致 */
    font-size: 9px; /* 与怪物图鉴标题一致 */
  }
  
  .skill-item-name {
    font-size: 10px; /* 与怪物图鉴项名称一致 */
  }
  
  .skill-item-level {
    font-size: 8px; /* 与怪物图鉴项统计一致 */
  }
  
  .skill-item-stats {
    font-size: 8px; /* 与怪物图鉴项统计一致 */
  }
}

/* 横屏模式 */
@media screen and (max-width: 768px) and (orientation: landscape) {
  /* 横屏时进一步调整布局 */
  #hud {
    top: 2px;
    left: 2px;
  }

  #bestiary {
    top: 2px;
    right: 2px;
    max-width: 180px; /* 横屏模式也加宽 */
    max-height: calc(100vh - 4px);
  }

  #skills-bar {
    right: 2px;
    top: 50px; /* 横屏时也在怪物图鉴下方 */
    max-width: 180px; /* 与怪物图鉴宽度一致 */
    max-height: calc(100vh - 4px); /* 与怪物图鉴一致 */
  }

  .version-info {
    font-size: 8px;
    padding: 2px 4px;
  }
}

/* 伤害统计系统（左下角，整体缩放） */
#damage-stats {
  position: fixed;
  left: 12px;
  bottom: 100px; /* 向上移动，避免与版本信息重叠 */
  z-index: 10;
  width: 160px;
  background: rgba(12, 15, 20, 0.6);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(232, 240, 255, 0.18);
  padding: 6px;
  font-size: 10px;
  pointer-events: none; /* 不阻挡交互 */
  transform: scale(0.85); /* 整体缩放 */
  transform-origin: left bottom;
}

.damage-stats-title {
  font-size: 11px;
  font-weight: bold;
  margin-bottom: 4px;
  color: #ff6b6b;
}

.damage-stats-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.damage-stats-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2px 4px;
  background: rgba(12, 15, 20, 0.4);
  border-left: 2px solid #ff6b6b;
  font-size: 9px;
  color: rgba(232, 240, 255, 0.85);
  line-height: 1.2;
}

.damage-stats-item-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-right: 4px;
}

.damage-stats-item-damage {
  font-size: 8px;
  color: rgba(232, 240, 255, 0.7);
  margin-right: 4px;
}

.damage-stats-item-percent {
  font-weight: bold;
  color: #ff6b6b;
  font-size: 9px;
  white-space: nowrap;
}

/* 版本信息 */
.version-info {
  position: fixed;
  left: 50%;
  bottom: 12px;
  transform: translateX(-50%);
  z-index: 1; /* 降低层级，可以被其他UI覆盖 */
  padding: 3px 6px;
  background: rgba(12, 15, 20, 0.7);
  color: rgba(232, 240, 255, 0.6);
  font-family: monospace;
  font-size: 8px; /* 字体调小 */
  user-select: none;
  backdrop-filter: blur(4px);
  border-radius: 4px;
  border: 1px solid rgba(107, 255, 234, 0.2);
  text-align: center;
  white-space: nowrap;
  pointer-events: none; /* 不阻挡其他UI的交互 */
}
